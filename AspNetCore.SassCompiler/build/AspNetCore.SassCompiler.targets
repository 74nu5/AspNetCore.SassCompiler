<Project>

  <Target Name="Generate Sass" BeforeTargets="CopyFilesToOutputDirectory">
    <Exec ConsoleToMSBuild="true"
          ContinueOnError="true"
          EchoOff="true"
          StandardErrorImportance="low"
          StandardOutputImportance="low"
          IgnoreExitCode="true"
          Command="dotnet $(SassCompilerDotNetJsonDll) get $(SassCompilerAppsettingsJson) SassCompiler:SourceFolder">
      <Output TaskParameter="ConsoleOutput" PropertyName="SassCompilerSourceFolder" Condition="'$(ExitCode)' == '0'" />
    </Exec>
    <Exec ConsoleToMSBuild="true"
          ContinueOnError="true"
          EchoOff="true"
          StandardErrorImportance="low"
          StandardOutputImportance="low"
          IgnoreExitCode="true"
          Command="dotnet $(SassCompilerDotNetJsonDll) get $(SassCompilerAppsettingsJson) SassCompiler:TargetFolder">
      <Output TaskParameter="ConsoleOutput" PropertyName="SassCompilerTargetFolder" Condition="'$(ExitCode)' == '0'" />
    </Exec>
    <Exec Command="$(SassCompilerBuildCommand) $(ProjectDir)$(SassCompilerSourceFolder):$(ProjectDir)$(SassCompilerTargetFolder)" />
  </Target>

</Project>
